---
title: "APP First Down Play Type vs CLT"
author: "Ayden Matocha"
date: "9/3/2025"
output:
  html_document:
    toc: TRUE
---

# Load Packages
```{r}
library(cfbfastR)
library(tidyverse)
library(DT)
```

# Load Play-by-Play Data
```{r}
pbp <- load_cfb_pbp(2025)
```

# Grab Data From APP vs CLT
```{r}
pbp_app_clt <- pbp %>% filter(pos_team == "App State", def_pos_team == "Charlotte")
```

# Get First Down Play Types and Statistics
```{r}
down1 <- pbp_app_clt %>% 
  filter(pos_team == "App State", (rush == 1 | pass == 1), down == 1) %>% 
  mutate(
    play_type = case_when(
      rush == 1 ~ "Rush",
      pass == 1 ~ "Pass"
    )
  ) %>% 
  group_by(play_type) %>% 
  summarize(
    plays = n(),
    mean_epa = mean(EPA, na.rm = TRUE),
    success_rate = mean(success, na.rm = TRUE),
    ypa = mean(yards_gained, na.rm = TRUE),
  ) %>% 
  arrange(-mean_epa) %>% 
  mutate(across(where(is.numeric), round, 3))

datatable(down1)
```

